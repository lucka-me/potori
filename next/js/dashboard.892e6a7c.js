(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0473":function(t,e,a){},"075d":function(t){t.exports=JSON.parse('{"en":{"link":"Link Google Account","match":"Manually Match","charts":"Charts","brainstorming":"Brainstorming","processingMails":"Processing Mails","queryingBrainstorming":"Querying Brainstorming","syncing":"Syncing","loadingGAPI":"Loading Google API"},"zh":{"link":"连接Google账号","match":"手动匹配","charts":"图表","brainstorming":"Brainstorming","processingMails":"处理邮件中","queryingBrainstorming":"查询Brainstorming中","syncing":"同步中","loadingGAPI":"正在加载Google API"}}')},"0dcb":function(t,e,a){},"0f82":function(t,e,a){},"123d":function(t){t.exports=JSON.parse('{"en":{"header":"Hightlight","all":"All"},"zh":{"header":"要点","all":"全部"}}')},"2f0c":function(t){t.exports=JSON.parse('{"en":{"title":"Dashboard","refresh":"Refresh","preferences":"Preferences"},"zh":{"title":"仪表盘","refresh":"刷新","preferences":"偏好设置"}}')},5442:function(t,e,a){},"55fa":function(t){t.exports=JSON.parse('{"en":{"header":"Scanners"},"zh":{"header":"扫描器"}}')},"625f":function(t,e,a){"use strict";a("5442")},7277:function(t,e,a){"use strict";a.r(e);var s=a("7a23");const c={class:"dashboard"};function n(t,e,a,n,r,o){const i=Object(s["A"])("material-icon-button"),l=Object(s["A"])("material-top-app-bar"),u=Object(s["A"])("material-top-app-bar-adjust"),b=Object(s["A"])("status"),d=Object(s["A"])("highlight"),O=Object(s["A"])("gallery"),h=Object(s["A"])("scanners"),j=Object(s["A"])("reasons");return Object(s["t"])(),Object(s["e"])(s["a"],null,[Object(s["i"])(l,{title:t.$t("title")},{default:Object(s["F"])(()=>[t.canRefresh?(Object(s["t"])(),Object(s["e"])(i,{key:0,icon:"redo",title:t.$t("refresh"),onClick:t.refresh},null,8,["title","onClick"])):Object(s["f"])("",!0),Object(s["i"])(i,{icon:"cog",title:t.$t("preferences"),onClick:t.openPreference},null,8,["title","onClick"])]),_:1},8,["title"]),Object(s["i"])(u),Object(s["i"])("main",c,[Object(s["i"])(b),t.empty?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["e"])(d,{key:0})),t.empty?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["e"])(O,{key:1})),t.empty?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["e"])(h,{key:2})),t.empty?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["e"])(j,{key:3}))])],64)}var r=a("9ab4"),o=a("1b40"),i=a("6022"),l=a("81dd"),u=a("2281"),b=a("4892");const d={class:"status"},O={key:1,class:"actions"};function h(t,e,a,c,n,r){const o=Object(s["A"])("linear-progress"),i=Object(s["A"])("material-icon-button");return Object(s["t"])(),Object(s["e"])("div",d,[t.showProgress?(Object(s["t"])(),Object(s["e"])(o,{key:0,text:t.$t(t.progressText),determinate:t.progressDeterminate},null,8,["text","determinate"])):Object(s["f"])("",!0),t.showActions?(Object(s["t"])(),Object(s["e"])("div",O,[t.showLinkButton?(Object(s["t"])(),Object(s["e"])(i,{key:0,icon:"sign-in-alt",title:t.$t("link"),onClick:t.link},null,8,["title","onClick"])):Object(s["f"])("",!0),t.showMatchButton?(Object(s["t"])(),Object(s["e"])(i,{key:1,icon:"user-check",title:t.$t("match"),onClick:t.match},null,8,["title","onClick"])):Object(s["f"])("",!0),t.showChartsButton?(Object(s["t"])(),Object(s["e"])(i,{key:2,icon:"chart-bar",title:t.$t("charts"),onClick:t.openCharts},null,8,["title","onClick"])):Object(s["f"])("",!0),t.showChartsButton?(Object(s["t"])(),Object(s["e"])(i,{key:3,icon:"brain",title:t.$t("brainstorming"),onClick:t.openBrainstorming},null,8,["title","onClick"])):Object(s["f"])("",!0)])):Object(s["f"])("",!0)])}var j=a("2e5e"),p=a("d43c"),g=a("075d");let m=class extends o["d"]{constructor(){super(...arguments),this.empty=!0}get saveID(){return this.$store.state.dia.saveID}get showProgress(){const t=this.$store.state.service.status;return t===i["b"].Status.processingMails||(t===i["b"].Status.queryingBrainstorming||(t===i["b"].Status.syncing||!(!this.empty||this.gapiLoaded)))}get progressText(){const t=this.$store.state.service.status;return t===i["b"].Status.processingMails?"processingMails":t===i["b"].Status.queryingBrainstorming?"queryingBrainstorming":t===i["b"].Status.syncing?"syncing":this.empty&&!this.gapiLoaded?"loadingGAPI":""}get progressDeterminate(){const t=this.$store.state.service.status;return t===i["b"].Status.processingMails?this.$store.state.progress.max>0:t===i["b"].Status.queryingBrainstorming}get showLinkButton(){return this.gapiLoaded&&!this.$store.state.google.authed}get showMatchButton(){return this.$store.state.service.status===i["b"].Status.requestMatch}get showChartsButton(){return!this.empty}get showActions(){return this.showLinkButton||this.showMatchButton||this.showChartsButton}get idle(){return this.$store.state.service.status===i["b"].Status.idle}get gapiLoaded(){return this.$store.state.google.loaded}created(){this.updateData()}onSaved(){this.updateData()}link(){i["b"].signIn()}match(){this.$router.push({path:"/match"})}openCharts(){this.$router.push({path:"/charts"})}openBrainstorming(){this.$router.push({path:"/brainstorming"})}updateData(){return Object(r["a"])(this,void 0,void 0,(function*(){const t=yield j["a"].count();this.empty=t<1}))}};Object(r["b"])([Object(o["e"])("saveID")],m.prototype,"onSaved",null),m=Object(r["b"])([Object(o["b"])({components:{MaterialIconButton:l["a"],LinearProgress:p["a"]},i18n:{messages:g}})],m);var f=m;a("d677");f.render=h;var v=f;const y={class:"card-grid"};function k(t,e,a,c,n,r){const o=Object(s["A"])("dashboard-card");return Object(s["t"])(),Object(s["e"])(s["a"],null,[Object(s["i"])("h2",null,Object(s["C"])(t.$t("header")),1),Object(s["i"])("div",y,[Object(s["i"])(o,{title:t.$t("all"),icon:"arrow-up",count:t.countAll,onClick:t.open},null,8,["title","count","onClick"]),(Object(s["t"])(!0),Object(s["e"])(s["a"],null,Object(s["y"])(t.dataset,e=>(Object(s["t"])(),Object(s["e"])(o,{key:e.status.code,title:e.status.title,icon:e.status.icon,count:e.count,onClick:a=>t.open(e.status)},null,8,["title","icon","count","onClick"]))),128))])],64)}var C=a("ce89");const D={class:"content"},A={class:"label"},S={class:"title"},$={class:"count"};function w(t,e,a,c,n,r){const o=Object(s["A"])("material-icon"),i=Object(s["A"])("material-card");return Object(s["t"])(),Object(s["e"])(i,{class:"dashboard-card"},{default:Object(s["F"])(()=>[Object(s["i"])("div",D,[Object(s["i"])("div",A,[Object(s["i"])(o,{icon:t.icon,"fixed-width":""},null,8,["icon"]),Object(s["i"])("span",S,Object(s["C"])(t.title),1)]),Object(s["i"])("div",$,Object(s["C"])(t.count),1)])]),_:1})}var B=a("e3a9"),I=a("7e13");let M=class extends o["d"]{};Object(r["b"])([Object(o["c"])(String)],M.prototype,"icon",void 0),Object(r["b"])([Object(o["c"])(String)],M.prototype,"title",void 0),Object(r["b"])([Object(o["c"])(Number)],M.prototype,"count",void 0),M=Object(r["b"])([Object(o["b"])({components:{MaterialCard:B["a"],MaterialIcon:I["a"]}})],M);var x=M;a("d101");x.render=w;var q=x,P=a("123d");let L=class extends o["d"]{constructor(){super(...arguments),this.countAll=0,this.dataset=[]}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}open(t){const e={path:"/list"};t&&(e.query={status:t.code}),this.$router.push(e)}updateData(){return Object(r["a"])(this,void 0,void 0,(function*(){const t=new Map;for(const a of C["a"].status.values())t.set(a.code,{status:a,count:0});const e=yield j["a"].getAll();for(const a of e){const e=t.get(a.status);e.count++}this.countAll=e.length,this.dataset=Array.from(t.values())}))}};Object(r["b"])([Object(o["e"])("saveID")],L.prototype,"onSaved",null),L=Object(r["b"])([Object(o["b"])({components:{DashboardCard:q},i18n:{messages:P}})],L);var N=L;N.render=k;var _=N;const G={class:"gallery"},J={class:"caption"};function z(t,e,a,c,n,r){const o=Object(s["A"])("material-icon"),i=Object(s["A"])("material-card");return Object(s["t"])(),Object(s["e"])(s["a"],null,[Object(s["i"])("h2",null,Object(s["C"])(t.$t("header")),1),Object(s["i"])("div",G,[(Object(s["t"])(!0),Object(s["e"])(s["a"],null,Object(s["y"])(t.nominations,e=>(Object(s["t"])(),Object(s["e"])("div",{key:e.id},[Object(s["i"])(i,{image:e.imageUrl,"square-image":"",onClick:a=>t.open(e.id)},{default:Object(s["F"])(()=>[Object(s["i"])("div",J,[Object(s["i"])(o,{icon:e.statusData.icon,"fixed-width":""},null,8,["icon"]),Object(s["i"])("span",null,Object(s["C"])(e.title),1)])]),_:2},1032,["image","onClick"])]))),128))])],64)}var R,T=a("a7a0"),F=a("a1cc");let U=R=class extends o["d"]{constructor(){super(...arguments),this.nominations=[]}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}open(t){this.$router.push({path:"/details",query:{id:t}})}updateData(){return Object(r["a"])(this,void 0,void 0,(function*(){const t=yield j["a"].getAll(R.predicator);this.nominations=t.map(t=>T["a"].from(t)).sort(T["a"].comparatorByTime)}))}};U.datePast30Days=Date.now()-2592e6,U.predicator=t=>t.confirmedTime>R.datePast30Days||t.resultTime>R.datePast30Days,Object(r["b"])([Object(o["e"])("saveID")],U.prototype,"onSaved",null),U=R=Object(r["b"])([Object(o["b"])({components:{MaterialCard:B["a"],MaterialIcon:I["a"]},i18n:{messages:F}})],U);var H=U;a("c79b");H.render=z;var W=H;const Q={class:"card-grid"};function E(t,e,a,c,n,r){const o=Object(s["A"])("dashboard-card");return Object(s["t"])(),Object(s["e"])(s["a"],null,[Object(s["i"])("h2",null,Object(s["C"])(t.$t("header")),1),Object(s["i"])("div",Q,[(Object(s["t"])(!0),Object(s["e"])(s["a"],null,Object(s["y"])(t.dataset,e=>(Object(s["t"])(),Object(s["e"])(o,{key:e.scanner.code,title:e.scanner.title,icon:"mobile-alt",count:e.count,onClick:a=>t.open(e.scanner)},null,8,["title","count","onClick"]))),128))])],64)}var K=a("55fa");let V=class extends o["d"]{constructor(){super(...arguments),this.dataset=[]}created(){this.updateData()}onSaved(){this.updateData()}open(t){this.$router.push({path:"/list",query:{scanner:t.code}})}updateData(){return Object(r["a"])(this,void 0,void 0,(function*(){const t=new Map;for(const a of C["a"].scanner.values())a.code!==C["a"].ScannerCode.Unknown&&t.set(a.code,{scanner:a,count:0});const e=yield j["a"].getAll();for(const a of e){if(a.scanner===C["a"].ScannerCode.Unknown)continue;const e=t.get(a.scanner);e.count++}this.dataset=Array.from(t.values()).filter(t=>t.count>0).sort((t,e)=>t.scanner.code>e.scanner.code?1:-1)}))}};Object(r["b"])([Object(o["e"])("saveID")],V.prototype,"onSaved",null),V=Object(r["b"])([Object(o["b"])({components:{DashboardCard:q},i18n:{messages:K}})],V);var X=V;X.render=E;var Y=X;const Z={class:"title-with-action"},tt=Object(s["i"])("div",{class:"spacer"},null,-1),et={class:"card-grid"};function at(t,e,a,c,n,r){const o=Object(s["A"])("material-button"),i=Object(s["A"])("dashboard-card");return Object(s["t"])(),Object(s["e"])(s["a"],null,[Object(s["i"])("h2",Z,[Object(s["i"])("span",null,Object(s["C"])(t.$t("header")),1),tt,Object(s["i"])(o,{onClick:t.toggleMore},{default:Object(s["F"])(()=>[Object(s["h"])(Object(s["C"])(t.$t(t.more?"less":"more")),1)]),_:1},8,["onClick"])]),Object(s["i"])("div",et,[(Object(s["t"])(!0),Object(s["e"])(s["a"],null,Object(s["y"])(t.dataset,e=>(Object(s["t"])(),Object(s["e"])(i,{key:e.reason.code,title:e.reason.title,icon:e.reason.icon,count:e.count,onClick:a=>t.open(e.reason)},null,8,["title","icon","count","onClick"]))),128))])],64)}var st=a("1703"),ct=a("960b");let nt=class extends o["d"]{constructor(){super(...arguments),this.more=!1,this.datasetAll=[]}get saveID(){return this.$store.state.dia.saveID}get dataset(){return this.more?this.datasetAll:this.datasetAll.slice(0,4)}created(){this.updateData()}onSaved(){this.updateData()}toggleMore(){this.more=!this.more}open(t){this.$router.push({path:"/list",query:{reason:t.code}})}updateData(){return Object(r["a"])(this,void 0,void 0,(function*(){const t=new Map,e=yield j["a"].getAll(C["a"].status.get(C["a"].StatusCode.Rejected).predicator);for(const a of C["a"].reason.values()){const s=e.filter(a.predicator).length;s<1||t.set(a.code,{reason:a,count:s})}this.datasetAll=Array.from(t.values())}))}};Object(r["b"])([Object(o["e"])("saveID")],nt.prototype,"onSaved",null),nt=Object(r["b"])([Object(o["b"])({components:{MaterialButton:st["a"],DashboardCard:q},i18n:{messages:ct}})],nt);var rt=nt;a("adc7");rt.render=at;var ot=rt,it=a("2f0c");let lt=class extends o["d"]{constructor(){super(...arguments),this.empty=!0}get canRefresh(){return this.$store.state.service.status===i["b"].Status.idle&&this.$store.state.google.authed}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}refresh(){i["b"].refresh()}openPreference(){this.$router.push({path:"/preferences"})}updateData(){return Object(r["a"])(this,void 0,void 0,(function*(){const t=yield j["a"].count();this.empty=t<1}))}};Object(r["b"])([Object(o["e"])("saveID")],lt.prototype,"onSaved",null),lt=Object(r["b"])([Object(o["b"])({components:{MaterialTopAppBar:u["a"],MaterialTopAppBarAdjust:b["a"],MaterialIconButton:l["a"],Status:v,Highlight:_,Gallery:W,Scanners:Y,Reasons:ot},i18n:{messages:it}})],lt);var ut=lt;a("625f");ut.render=n;e["default"]=ut},"7e13":function(t,e,a){"use strict";var s=a("7a23");function c(t,e,a,c,n,r){const o=Object(s["A"])("material-icon-raw");return Object(s["t"])(),Object(s["e"])("i",{class:t.className},[Object(s["i"])(o,{icon:t.icon},null,8,["icon"])],2)}var n=a("9ab4"),r=a("1b40"),o=a("bd16");let i=class extends r["d"]{get className(){let t="fa";return this.fixedWidth&&(t+=" fa-fw"),t}};Object(n["b"])([Object(r["c"])(String)],i.prototype,"icon",void 0),Object(n["b"])([Object(r["c"])(Boolean)],i.prototype,"fixedWidth",void 0),i=Object(n["b"])([Object(r["b"])({components:{MaterialIconRaw:o["a"]}})],i);var l=i;l.render=c;e["a"]=l},"8e15":function(t,e,a){"use strict";a("0f82")},"960b":function(t){t.exports=JSON.parse('{"en":{"header":"Reasons","more":"More","less":"Less"},"zh":{"header":"拒绝原因","more":"更多","less":"更少"}}')},a1cc:function(t){t.exports=JSON.parse('{"en":{"header":"Last 30 Days"},"zh":{"header":"近30天"}}')},adc7:function(t,e,a){"use strict";a("0473")},c79b:function(t,e,a){"use strict";a("0dcb")},d101:function(t,e,a){"use strict";a("ee55")},d677:function(t,e,a){"use strict";a("fb90")},e3a9:function(t,e,a){"use strict";var s=a("7a23");const c={class:"mdc-card mdc-card--outlined"},n={class:"mdc-card__primary-action"};function r(t,e,a,r,o,i){return Object(s["t"])(),Object(s["e"])("div",c,[Object(s["i"])("div",n,[t.image?(Object(s["t"])(),Object(s["e"])("div",{key:0,class:t.mediaClassName,style:t.mediaStyle},null,6)):Object(s["f"])("",!0),Object(s["z"])(t.$slots,"default")])])}var o=a("9ab4"),i=a("1b40");class l extends i["d"]{get mediaClassName(){return"mdc-card__media mdc-card__media--"+(this.squareImage?"square":"16-9")}get mediaStyle(){return this.image?`background-image: url("${this.image}")`:""}}Object(o["b"])([Object(i["c"])(String)],l.prototype,"image",void 0),Object(o["b"])([Object(i["c"])(Boolean)],l.prototype,"squareImage",void 0);a("8e15");l.render=r;e["a"]=l},ee55:function(t,e,a){},fb90:function(t,e,a){}}]);
//# sourceMappingURL=dashboard.892e6a7c.js.map